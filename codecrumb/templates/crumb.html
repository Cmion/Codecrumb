{% extends 'layout.html' %} {% block meta %}
<link rel="stylesheet" href="{{url_for('static', filename='css/crumb.css')}}" />
{% endblock %}

<body>
  {% block body %}  <div class="header">
      <div class="logo">
        <a href="{{ url_for('main.editor') }}">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="55"
            height="55"
            viewBox="0 0 48 48"
            style="transform: rotate(25deg)"
            fill="#fa0033"
          >
            <path
              d="M12 26c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 1c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm6-9c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm30 11c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm-14-7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0-7c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zM6 27c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm14 14c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0-34c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm0 7c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 11c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm16 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 17c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-14 7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 7c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm-8-24c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm0 17c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm8-9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"
            />
            <path d="M0 0h48v48H0z" fill="none" />
          </svg>
        </a>
        <a href="{{ url_for('main.editor') }}" class="new-editor"
          ><i class="material-icons">code</i>Editor</a
        >
      </div>
      <div class="crumb-note">
        {% with messages = get_flashed_messages() %} {% if messages %} {% for
        message in messages %}
        <span>{{ message }}</span>
        {% endfor%} {% endif %} {% endwith %}
      </div>
      <div class="new-cr">
        <div class="user-crumb tab-menu-link">
          {% if current_user.is_authenticated %}
          <img src="{{ image }}" alt="{{ current_user.username }}" class="user-crumb-img" height="35px" width="35px"/>
          <div class="user-crumb-menu">
           
              <a href="{{ url_for('oauth.account') }}">Dashboard</a>
              <a href="{{ url_for('set_crumb.crumbs') }}" class="first">Your crumbs</a>
             
              <a href="{{ url_for('set_crumb.save') }}">New Crumb</a>
              <a href="{{ url_for('oauth.logout') }}" class="logout">Logout</a>
           
          </div>
          {% endif %}
        </div>
      </div>
    </div> {% if crumbs.total != 0 %}
  <div class="search">
    <form>
      <label><input type="text" placeholder="Filter by name"/></label>
      <button type="submit">Search</button>
    </form>
  </div>
  {% else %}
  <div class="search">
    <form>
      <label
        ><input
          type="text"
          class="disabled"
          placeholder="Filter by name"
          disabled
      /></label>
      <button type="submit" class="disabled" disabled>Search</button>
    </form>
  </div>
  {% endif %}
  <div class="container">
    <div class="container__crumb">
      {% if crumbs.total > 0 %} {% for crumb in crumbs.items %}

      <div class="crumbs">
        <div class="name">
          <span>{{ crumb.crumbName }}</span>
        </div>
        <div class="thumbnail">
          <input
            type="hidden"
            class="crumbSrc"
            name="html"
            value="{{ json.dumps(json_response(crumb, True)) }}"
          />

          <iframe
            id="transcend-preview"
            allow="midi; geolocation; microphone; camera; encrypted-media;"
            sandbox="allow-forms allow-scripts allow-same-origin allow-modals allow-popups"
            allowfullscreen=""
            allowpaymentrequest=""
            frameborder="0"
            src=""
            name="CodeCrumb"
          >
          </iframe>
        </div>

        <div class="select-btn">
          <a
            href="{{url_for('set_crumb.codecrumb', author=crumb.author.username, url=crumb.url)}}"
            >Preview</a
          >
          <a href="#" class="">Export</a>
          <a
            href=""
            data-confirm="Are you sure you want to delete this crumb?"
            data-id="{{ crumb.id }}"
            class="del-tag"
            >Delete</a
          >
        </div>
      </div>
      {% endfor %}
      <div class="deletefooter">
        {% if crumbs.total != 0 %} {% for i in crumbs.iter_pages(left_edge=1,
        right_edge=1, left_current=1, right_current=2) %} {% if i %} {% if
        crumbs.page == i%}
        <div class="del-del">
          <a href="{{url_for('set_crumb.crumbs', page=i)}}" class="form-tag">{{
            i
          }}</a>
        </div>
        {% else %}
        <div class="del-cancel">
          <a href="{{url_for('set_crumb.crumbs', page=i)}}">{{ i }}</a>
        </div>
        {% endif %} {% else %}
        <div class="del-cancel">
          <a href="{{url_for('set_crumb.crumbs', page=i)}}">...</a>
        </div>
        {% endif %} {% endfor %} {% endif %}
      </div>
    </div>
    {% elif crumbs.total == 0 %}
    <div class="empty-crumb">
      <span>Hey Programmer, your Crumb is empty!</span>
      <a href="{{ url_for('main.editor') }}" class="add_new"
        >Create a new Crumb ?</a
      >
    </div>

    {% endif %}
  </div>
  <script src="{{url_for('static', filename='js/prepro.js')}}"></script>
  <script src="{{url_for('static', filename='js/crumbpage.js')}}"></script>
  <!-- {% block otherScript %}
  {{ super() }}
  {% endblock %}  -->
  {% endblock %}
</body>
