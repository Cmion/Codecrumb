const HtmlModes={HTML:"html",PUG:"pug",MARKDOWN:"markdown"},CSSModes={CSS:"css",SCSS:"scss",SASS:"sass",LESS:"less",STYLUS:"stylus"},JSModes={JS:"javascript",CS:"coffeescript",TS:"typescript",BABEL:"babel",JSX:"jsx"},modes={};modes[HtmlModes.HTML]={tdMimeType:"htmlmixed",name:"HTML",parser:"html"},modes[HtmlModes.PUG]={tdMimeType:{name:"pug",alignCDATA:!0},name:"Pug",parser:"html"},modes[HtmlModes.MARKDOWN]={tdMimeType:{name:"gfm",tokenTypeOverrides:{emoji:"emoji"}},name:"Markdown",parser:"markdown"},modes[CSSModes.CSS]={tdMimeType:"css",name:"CSS",parser:"css"},modes[CSSModes.SCSS]={tdMimetype:"text/x-scss",name:"SCSS",parser:"css"},modes[CSSModes.SASS]={tdMimeType:"sass",name:"SASS",parser:"css"},modes[CSSModes.LESS]={tdMimeType:"text/x-less",name:"LESS",parser:"css"},modes[CSSModes.STYLUS]={tdMimeType:"stylus",name:"Stylus",parser:"css"},modes[JSModes.JS]={tdMimeType:"javascript",name:"JavaScript",parser:"babylon"},modes[JSModes.CS]={tdMimeType:"text/coffeescript",name:"CoffeeScript",parser:"babylon"},modes[JSModes.TS]={tdMimeType:"text/typescript-jsx",name:"TypeScript",parser:"babylon"},modes[JSModes.BABEL]={tdMimeType:"text/jsx",name:"Babel",parser:"babylon"},modes[JSModes.JSX]={tdMimeType:"jsx",name:"JSX",parser:"babylon"};const{htmlArea:htmlArea,cssArea:cssArea,jsArea:jsArea,preview:preview,pen:pen,code:code,codeHead:codeHead,htmlPen:htmlPen,cssPen:cssPen,jsPen:jsPen,editorTab:editorTab,editorPreview:editorPreview,editorContainer:editorContainer,editorBody:editorBody,getView:getView,htmlTab:htmlTab,cssTab:cssTab,jsTab:jsTab,htmlMode:htmlMode,cssMode:cssMode,jsMode:jsMode,htmlResize:htmlResize,cssResize:cssResize,jsResize:jsResize,htmlHead:htmlHead,cssHead:cssHead,jsHead:jsHead,run:run,saveCrumb:saveCrumb,cssLib:cssLib,jsLib:jsLib,metaLib:metaLib,submitLib:submitLib,generalSettings:generalSettings,languageSettings:languageSettings,balanceSettings:balanceSettings,behaviourSettings:behaviourSettings,kbdSettings:kbdSettings,profileSettings:profileSettings,customSettings:customSettings,customTab:customTab,languageTab:languageTab,generalTab:generalTab,balanceTab:balanceTab,behaviourTab:behaviourTab,kbdTab:kbdTab,profileTab:profileTab,editorMenuMain:editorMenuMain,settingsBtn:settingsBtn,gutterHori:gutterHori,crumbName:crumbName,loader:loader,userValue:userValue,cmDark:cmDark,keymaps:keymaps,fontFm:fontFm,sizes:sizes,preset:preset,consoleText:consoleText,out:out,c_name:c_name,clearConsole:clearConsole,htmlPre:htmlPre,cssPre:cssPre,jsPre:jsPre,saveAnonCrumb:saveAnonCrumb,snippetSource:snippetSource,outnum:outnum,consoleBtn:consoleBtn,preserveLog:preserveLog,htmlChangesMade:htmlChangesMade,cssChangesMade:cssChangesMade,jsChangesMade:jsChangesMade,exportFile:exportFile,linterITag:linterITag,toggleLinter:toggleLinter,consoleBar:consoleBar,openDebugConsole:openDebugConsole,tabSizeCustom:tabSizeCustom,fontFmCustom:fontFmCustom,customFSize:customFSize,fontLigatures:fontLigatures,colorPickerType:colorPickerType,autoRunDelay:autoRunDelay,consoleInput:consoleInput,resizeFrame:resizeFrame,editorSkins:editorSkins,consoleOutput:consoleOutput}=elementDeclaration(),csse={html:"html",css:"css",js:"javascript"},dataItems={author:!1},dataItem=userValue.value;let delay,jsChangeNum=0,cssChangeNum=0,htmlChangeNum=0,saveCrumbClicked=!1;const snippetFormatted=snippetSource.value,examp={globals:{markup:{snippets:{foo:"div.foo[bar=baz]>span.hello{Hey crumber, this is a code snippet}"}},stylesheet:{snippets:{myp:"body{\n height: 100vh; \n color: #888; \n width: 100vw;\n background: #20232E;\n overflow: hidden; \n display: flex; \n align-items: center; \n justify-content: center; \n} \n .hello{ \n font-size: 30px; \n padding: 10px; \n color: white; \n text-transform: capitalize; \n}"}}}};function crumbEditor(e){return{mode:e,lineNumbers:!0,theme:"andromeda",scrollbarStyle:"simple",autoCloseTags:!0,styleActiveLine:!1,lineWrapping:!0,indentUnit:2,tabSize:2,indentWithTabs:!0,autoCloseBrackets:!0,matchBrackets:!0,autoRefresh:!0,markTagPairs:!0,autoRenameTags:!0,jsxBracket:!0,undoDepth:500,showCursorWhenSelecting:!0,matchTags:{bothTags:!0},_extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())},"Alt-f":"findPersistent","Ctrl-Enter":function(){updatePreview()},"Alt-A":function(){prettify(htmlEditor,cssEditor,jsEditor)},"Alt-J":function(){beautifySingleFile(jsEditor,csse.js)},"Alt-C":function(){beautifySingleFile(cssEditor,csse.css)},"Alt-H":function(){beautifySingleFile(htmlEditor,csse.html)},Tab:"emmetExpandAbbreviationAll","Ctrl-E":"emmetExpandAbbreviationAll",Enter:"emmetInsertLineBreak","Ctrl-Space":"autocomplete","Ctrl-W":"emmetWrapWithAbbreviation","Ctrl-/":"toggleComment"},get extraKeys(){return this._extraKeys},set extraKeys(e){this._extraKeys=e},value:document.documentElement.innerHTML,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],_emmet:"None"==snippetFormatted?examp:JSON.parse(snippetFormatted),get emmet(){return this._emmet},set emmet(e){this._emmet=e}}}animate();const htmlEditor=CodeMirror.fromTextArea(htmlArea,crumbEditor("text/html")),cssEditor=CodeMirror.fromTextArea(cssArea,crumbEditor("css")),jsEditor=CodeMirror.fromTextArea(jsArea,crumbEditor("javascript")),consoleEditor=CodeMirror.fromTextArea(consoleText,{theme:"neo",readOnly:!0,lineWrapping:!0,mode:"jsx",indentUnit:2,tabSize:2,indentWithTabs:!0,scrollbarStyle:"simple",disableInput:!0,showCursorWhenSelecting:!0,extraKeys:{Tab:!1},foldGutter:!0,gutters:["CodeMirror-foldgutter"]});htmlEditor.setSize("100%","100%"),cssEditor.setSize("100%","100%"),jsEditor.setSize("100%","100%"),consoleEditor.setSize("100%","100%"),function(){htmlEditor.setOption("value",'\x3c!-- Every code written here is placed within the body tag --\x3e\n<div class="foo" bar="baz">I am inside a body tag!. âš¡</div>\n');cssEditor.setOption("value","/* toggle the settings button to use a preprocessor, like SCSS */\nbody {\n  font-family: Helvetica;\n  color: #111111;\n  padding: 1.5em;\n  font-size: 1.5em;\n}\n");jsEditor.setOption("value",'/* Click the Console button to view your logs */\nconst codeCrumb = x => {\n  console.log("Hey "+ x + ", Press Alt-R or Click Run to Preview your code.");\n};\ncodeCrumb("Programmer");\n'),consoleEditor.setOption("value","# Your logs will appear here.... "),beautifySingleFile(htmlEditor,csse.html),beautifySingleFile(cssEditor,csse.css),beautifySingleFile(jsEditor,csse.js)}();const editors=[htmlEditor,cssEditor,jsEditor];function setPreload(e,t=!1,s=!1){const o=returnStates(),n=o.html,r=o.css,i=o.js,a=htmlEditor.getValue(),c=cssEditor.getValue(),l=jsEditor.getValue(),d=metaLib.value,m=cssLib.value,u=jsLib.value,h=crumbName.crumb.value,p=JSON.stringify({modes:{htmlMode:n,cssMode:r,jsMode:i},codes:{html:a,css:c,js:l},libs:{htmlMeta:d,cssLib:m,jsLib:u},title:{name:h},isNew:!0,editorSettings:{keymap:keymaps.selectedOptions[0].getAttribute("name"),font:fontFm.selectedOptions[0].getAttribute("name"),theme:cmDark.selectedOptions[0].getAttribute("name"),fSize:sizes.selectedOptions[0].getAttribute("name")}});if(e){const e=window.origin;fetch(`${e}${t}`,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),cache:"no-cache",body:p}).then(e=>e.json()).then(t=>{const o=t.path,n=document.querySelector(".unsaved-draft");localStorage.removeItem("crumb"),n.style.visibility="hidden",saveCrumbClicked=s.target.classList.contains("save-crumb");const r=`${e}/${o}`;window.location.href=r}).catch(e=>console.warn(e))}else localStorage.setItem("crumb",p)}function computePreloadPreview(e){const t=e.codes,s=e.modes,o=e.libs,n=e.title;e.editorSettings;htmlEditor.getDoc().setValue(t.html),cssEditor.getDoc().setValue(t.css),jsEditor.getDoc().setValue(t.js),cssLib.value=o.cssLib||"",jsLib.value=o.jsLib||"",metaLib.value=o.htmlMeta||"",crumbName.crumb.value=n.name||"",htmlPenState(htmlEditor,s.htmlMode),cssPenState(cssEditor,s.cssMode),jsPenState(jsEditor,s.jsMode);const r=document.querySelector("#html-pre"),i=document.querySelector("#css-pre"),a=document.querySelector("#js-pre"),c=document.querySelector(".html-mode-name"),l=document.querySelector(".css-mode-name"),d=document.querySelector(".js-mode-name"),m=i.namedItem(s.cssMode),u=r.namedItem(s.htmlMode),h=a.namedItem(s.jsMode),p=u.getAttribute("data-name"),g=m.getAttribute("data-name"),y=h.getAttribute("data-name");csse.html=s.htmlMode,csse.css=s.cssMode,csse.js=s.jsMode,c.innerHTML=`<span>${p}</span>`,l.innerHTML=`<span>${g}</span>`,d.innerHTML=`<span>${y}</span>`,i.options.selectedIndex=m.index,r.options.selectedIndex=u.index,a.options.selectedIndex=h.index,updatePreview()}function unsavedChange(){let e;htmlEditor.on("keyup",function(){clearTimeout(e),e=setTimeout(()=>{htmlChangeNum++,htmlChangesMade.setAttribute("data-change",`${htmlChangeNum} unsaved change`),document.documentElement.style.setProperty("--html","1")},2e3)}),cssEditor.on("keyup",function(){clearTimeout(e),e=setTimeout(()=>{cssChangeNum++,cssChangesMade.setAttribute("data-change",`${cssChangeNum} unsaved change`),document.documentElement.style.setProperty("--css","1")},2e3)}),jsEditor.on("keyup",function(){clearTimeout(e),e=setTimeout(()=>{jsChangeNum++,jsChangesMade.setAttribute("data-change",`${jsChangeNum} unsaved change`),document.documentElement.style.setProperty("--js","1")},2e3)})}function savedChange(){document.documentElement.style.setProperty("--html","0"),document.documentElement.style.setProperty("--css","0"),document.documentElement.style.setProperty("--js","0"),cssChangeNum=0,jsChangeNum=0,htmlChangeNum=0}function updatePreview(){const e=returnStates(htmlEditor,cssEditor,jsEditor),t=e.html,s=e.css,o=e.js,n=HtmlCompile(htmlEditor,t),r=CSSCompile(cssEditor,s),i=JSCompile(jsEditor,o);Promise.all([n,r,i]).then(e=>{const t=getPreview({html:e[0].code,css:e[1].code,js:e[2].code,meta:metaLib,cssExt:cssLib,jsExt:jsLib,mode:o});printError(e[0].error),printError(e[1].error),printError(e[2].error);requestAnimationFrame||webkitRequestAnimationFrame;requestAnimationFrame(()=>{preview.src=t})}),localStorage.removeItem("crumb")}function printError(e){let t=parseInt(outnum.getAttribute("data-error")),s=parseInt(consoleBar.getAttribute("data-label"));if(e){const o=e.data[0].message,n=e.lang,r=e.data[0].lineNumber,i="---------------------------------------",a=`\n${i}\n[${n.toUpperCase()}] ${o} \n\t\t\t\t at line ${r}\n${i}`;preserveLog.checked?(t++,s++,outnum.setAttribute("data-error",`${t}`),s>1?consoleBar.setAttribute("data-label",`${s} errors.`):consoleBar.setAttribute("data-label",`${s} error.`),consoleEditor.replaceRange(a,CodeMirror.Pos(consoleEditor.lastLine()+1))):preserveLog.checked||(consoleEditor.getDoc().setValue(a),++t,++s,outnum.setAttribute("data-error",`${t}`),s>1?consoleBar.setAttribute("data-label",`${s} errors.`):consoleBar.setAttribute("data-label",`${s} error.`)),outnum.textContent=`${t}`}}function __setEditorPreset__(e,t){if(localStorage.__defineEditorPresets__){const s=JSON.parse(localStorage.__defineEditorPresets__);localStorage.setItem("__defineEditorPresets__",JSON.stringify({...s,[e]:t}))}}!function(){if(localStorage.crumb){const e=document.querySelector(".discard-draft"),t=document.querySelector(".load-draft"),s=document.querySelector(".unsaved-draft"),o=document.querySelector(".alert-md-body");s.style.visibility="visible",document.addEventListener("DOMContentLoaded",function(e){setTimeout(()=>{o.style.animation="alertModal .15s linear forwards"},5e3)}),s.addEventListener("click",function(e){e.preventDefault(),o.style.animation="alertModal .15s linear forwards"}),window.addEventListener("click",function(e){e.target==o&&(o.style.animation="alertModalOut .15s linear forwards")}),e.addEventListener("click",function(e){e.preventDefault(),localStorage.removeItem("crumb"),s.style.visibility="hidden",o.style.animation="alertModalOut .15s linear forwards"}),t.addEventListener("click",function(e){e.preventDefault(),computePreloadPreview(JSON.parse(localStorage.crumb)),setTimeout(()=>{o.style.animation="alertModalOut. 15s linear forwards"},500)})}}(),unsavedChange(),submitLib.addEventListener("click",()=>{updatePreview()}),crumbName.crumb.addEventListener("change",function(e){}),crumbName.addEventListener("keypress",e=>{13===e.keyCode&&crumbName.blur()}),run.addEventListener("click",e=>{e.preventDefault(),updatePreview()}),settingButtons(htmlEditor,cssEditor,jsEditor,editors,updatePreview,cmDark,fontFm,sizes,keymaps),initState(htmlEditor,cssEditor,jsEditor,updatePreview),keyboardShortCuts(updatePreview,htmlEditor,cssEditor,jsEditor);const anonymousModal=document.querySelector(".save-md-body");if("True"===dataItem){saveCrumb.addEventListener("click",e=>{e.preventDefault();const t=document.querySelector(".unsaved-draft");localStorage.removeItem("crumb"),t.style.visibility="hidden",setPreload(!0,"/crumbs/save",e)});const e=JSON.parse(preset.value).editorSettings;changeEditorSettings(htmlEditor,cssEditor,jsEditor,e,cmDark,fontFm,sizes,keymaps)}else saveCrumb.addEventListener("click",e=>{e.preventDefault(),setPreload(!1),savedChange(),anonymousModal.style.animation="alertModal .15s linear  forwards"}),window.addEventListener("click",e=>{e.target==anonymousModal&&(anonymousModal.style.animation="alertModalOut .15s linear forwards")}),saveAnonCrumb.addEventListener("click",function(e){e.preventDefault(),setPreload(!0,"/anon/crumbs",e)});function redirectUser(e){const t=window.origin;fetch(`${t}${e}`,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),cache:"no-cache",body:JSON.stringify(getPreload)}).then(e=>e.json()).then(e=>{const s=e.path,o=`${t}/${s}`;window.location.href=o}).catch(e=>console.warn(e))}function elementDeclaration(){const e=document.querySelector("#html"),t=document.querySelector("#css"),s=document.querySelector("#js"),o=document.querySelector("#transcend-preview"),n=document.querySelector(".pen"),r=document.querySelector(".code-pen"),i=document.querySelectorAll(".code-head"),a=document.querySelector(".html-pen"),c=document.querySelector(".css-pen"),l=document.querySelector(".js-pen"),d=document.querySelectorAll(".editor-tab"),m=document.querySelector(".editor-preview "),u=document.querySelector(".editor-container"),h=document.querySelector(".editor-body"),p=document.querySelector(".get-view"),g=document.querySelector(".htmlTab"),y=document.querySelector(".cssTab"),v=document.querySelector(".jsTab"),f=document.querySelector(".html-mode"),b=document.querySelector(".css-mode"),S=document.querySelector(".js-mode"),E=document.querySelector(".html-resize"),C=document.querySelector(".css-resize"),T=document.querySelector(".js-resize"),k=document.querySelector("#html-head"),L=document.querySelector("#css-head"),M=document.querySelector("#js-head"),w=document.querySelector(".run-preview"),P=document.querySelector(".save-crumb"),x=document.querySelector("#csslib"),j=document.querySelector("#jslib"),A=document.querySelector("#metalib"),q=document.querySelector("#submit-lib"),_=document.querySelector(".general-settings"),O=document.querySelector(".language"),$=document.querySelector(".sc-custom"),z=document.querySelector(".balance"),I=document.querySelector(".behaviour-settings"),H=document.querySelector(".keyboard-shortcuts"),B=document.querySelector(".profile-settings"),F=document.querySelector(".general-tab"),D=document.querySelector(".language-tab"),R=document.querySelector(".custom-tab"),N=document.querySelector(".balance-tab"),J=document.querySelector(".behaviour-tab"),V=document.querySelector(".keyboard-tab"),W=document.querySelector(".profile-tab"),U=document.querySelector(".editor-menu-main");return{htmlArea:e,cssArea:t,jsArea:s,preview:o,pen:n,code:r,codeHead:i,htmlPen:a,cssPen:c,jsPen:l,editorTab:d,editorPreview:m,editorContainer:u,editorBody:h,getView:p,htmlTab:g,cssTab:y,jsTab:v,htmlMode:f,cssMode:b,jsMode:S,htmlResize:E,cssResize:C,jsResize:T,htmlHead:k,cssHead:L,jsHead:M,run:w,consoleBtn:document.querySelector(".open-console"),saveCrumb:P,cssLib:x,jsLib:j,metaLib:A,submitLib:q,generalSettings:_,languageSettings:O,balanceSettings:z,behaviourSettings:I,kbdSettings:H,profileSettings:B,customSettings:$,customTab:R,languageTab:D,generalTab:F,balanceTab:N,behaviourTab:J,kbdTab:V,profileTab:W,editorMenuMain:U,settingsBtn:document.querySelector(".settings-button"),gutterHori:document.querySelector(".resize-both"),crumbName:document.forms.crumbName,loader:document.querySelector(".loader"),userValue:document.querySelector("#userValue"),cmDark:document.querySelector(".theme-dark"),keymaps:document.querySelector(".keymaps"),fontFm:document.querySelector(".fonts"),sizes:document.querySelector(".font-size"),preset:document.querySelector("#preset"),consoleText:document.querySelector("#error-log"),out:document.querySelector(".out"),c_name:document.querySelector(".console-name"),clearConsole:document.querySelector(".out-clear"),htmlPre:document.querySelector("#html-pre"),cssPre:document.querySelector("#css-pre"),jsPre:document.querySelector("#js-pre"),saveAnonCrumb:document.querySelector(".save-anon-crumb"),snippetSource:document.querySelector("#snippets"),outnum:document.querySelector(".console-label"),preserveLog:document.querySelector("#preserve-log"),htmlChangesMade:document.querySelector(".html-changes-made"),cssChangesMade:document.querySelector(".css-changes-made"),jsChangesMade:document.querySelector(".js-changes-made"),openPseudocode:document.querySelector(".toggle-pseudo-code"),exportFile:document.querySelector(".export-file"),linterITag:document.querySelector(".tg-l"),toggleLinter:document.querySelector(".toggle-linter"),consoleBar:document.querySelector(".console-bar"),openDebugConsole:document.querySelector(".open-debug-console"),tabSizeCustom:document.querySelector("#tab-size-custom"),fontFmCustom:document.querySelector("#font-family-custom"),customFSize:document.querySelector("#font-size-custom"),fontLigatures:document.querySelector("#font-ligatures"),colorPickerType:document.querySelector("#color-picker-type"),autoRunDelay:document.querySelector("#auto-run-delay"),consoleInput:document.querySelector("#input-log"),resizeFrame:document.querySelector(".frame-in"),editorSkins:document.querySelector("#editor-skin"),consoleOutput:document.querySelector(".output-console")}}function deferred(){const e={},t=new Promise(function(t,s){e.resolve=t,e.reject=s});return e.promise=t,Object.assign(e,t)}function htmlPenState(e,t){const s=deferred();if(t===HtmlModes.HTML){e.setOption("mode",modes.html.tdMimeType);const t=e.getOption("mode");s.resolve({mode:t})}else if(t===HtmlModes.MARKDOWN){e.setOption("mode",modes.markdown.tdMimeType);const t=e.getOption("mode");s.resolve({mode:t})}else if(t===HtmlModes.PUG){e.setOption("mode",modes.pug.tdMimeType);const t=e.getOption("mode");s.resolve({mode:t})}return s.promise}function cssPenState(e,t){t===CSSModes.CSS?e.setOption("mode",modes.css.tdMimeType):t===CSSModes.SASS||t===CSSModes.SCSS?t===CSSModes.SASS?e.setOption("mode",modes.sass.tdMimeType):t===CSSModes.SCSS&&e.setOption("mode",modes.scss.tdMimetype):t===CSSModes.STYLUS?e.setOption("mode",modes.stylus.tdMimeType):t===CSSModes.LESS&&e.setOption("mode",modes.less.tdMimeType)}function jsPenState(e,t){t===JSModes.JS?e.setOption("mode",modes.javascript.tdMimeType):t===JSModes.CS?e.setOption("mode",modes.coffeescript.tdMimeType):t===JSModes.TS?e.setOption("mode",modes.typescript.tdMimeType):t===JSModes.BABEL?e.setOption("mode",modes.babel.tdMimeType):t===JSModes.JSX&&e.setOption("mode",modes.jsx.tdMimeType)}function HtmlCompile(e,t){const s=deferred();let o,n=e.getValue();if(t===HtmlModes.HTML){e.setOption("mode",modes.html.tdMimeType);try{prettier.format(n,{parser:"html",plugins:prettierPlugins})}catch(t){o={lang:"HTML",data:[{lineNumber:e.lineCount(),message:t.message}]}}finally{s.resolve({code:n,error:o})}}else if(t===HtmlModes.MARKDOWN){e.setOption("mode",modes.markdown.tdMimeType),showdown.setFlavor("github");const t=(new showdown.Converter).makeHtml(n);s.resolve({code:t})}else if(t===HtmlModes.PUG){e.setOption("mode",modes.pug.tdMimeType);try{n=jade.render(e.getValue())}catch(t){o={lang:"Pug",data:[{lineNumber:e.lineCount(),message:t.message}]}}finally{s.resolve({code:n,error:o})}}return s.promise}function CSSCompile(e,t){const s=deferred();let o;const n=e.getValue();if(t===CSSModes.CSS){e.setOption("mode",modes.css.tdMimeType);try{prettier.format(n,{parser:"css",plugins:prettierPlugins})}catch(t){o={lang:"CSS",data:[{lineNumber:e.lineCount(),message:t.message}]}}finally{s.resolve({code:n,error:o})}}else if(t===CSSModes.SASS||t===CSSModes.SCSS){const r=new Sass;t===CSSModes.SASS?(e.setOption("mode",modes.sass.tdMimeType),r.compile(n,{indentedSyntax:!0},function(e){e.line&&e.message&&(o={lang:"SASS",data:[{lineNumber:e.line,message:e.message}]}),s.resolve({code:e.text,error:o})})):t===CSSModes.SCSS&&(e.setOption("mode",modes.scss.tdMimetype),r.compile(n,{indentedSyntax:!1},function(e){e.line&&e.message&&(o={lang:"SCSS",data:[{lineNumber:e.line,message:e.message}]}),s.resolve({code:e.text,error:o})}))}else t===CSSModes.STYLUS?(e.setOption("mode",modes.stylus.tdMimeType),stylus(e.getValue()).render(function(t,n){t&&(o={lang:"STYLUS",data:[{lineNumber:e.lineCount(),message:t.message.split("}")}]},s.resolve({code:"",error:o})),s.resolve({code:n})})):t===CSSModes.LESS&&(e.setOption("mode",modes.less.tdMimeType),less.render(e.getValue()).then(e=>{s.resolve({code:e.css})}).catch(e=>{o={lang:"LESS",data:[{lineNumber:e.line,message:e.message}]},s.resolve({code:"",error:o})}));return s.promise}function JSCompile(e,t){let s=e.getValue();const o=deferred();let n;if(t===JSModes.JS){e.setOption("mode",modes.javascript.tdMimeType);try{prettier.format(s,{parser:"babylon",plugins:prettierPlugins})}catch(e){const t=e.message.split("\n")[0].split(" "),s=t[t.length-1];n={lang:"JS",data:[{lineNumber:s.slice(1,s.length-1),message:e.message}]}}finally{o.resolve({code:s,error:n})}}else if(t===JSModes.CS){e.setOption("mode",modes.coffeescript.tdMimeType);try{s=CoffeeScript.compile(s,{bare:!0})}catch(e){n={lang:"CoffeeScript",data:[{lineNumber:e.location.first_line+1,message:e.message}]}}finally{o.resolve({code:s,error:n})}}else if(t===JSModes.TS){e.setOption("mode",modes.typescript.tdMimeType);try{(s=ts.transpileModule(s,{reportDiagnostics:!0,compilerOptions:{noEmitOnError:!1,diagnostics:!0,module:ts.ModuleKind.ES2015,jsx:"react",jsxEmit:"react"}})).diagnostics.length&&(n={lang:"TypeScript",data:[{message:s.diagnostics[0].messageText,lineNumber:ts.getLineOfLocalPosition(s.diagnostics[0].file,s.diagnostics[0].start)-1}]}),o.resolve({code:s.outputText,error:n})}catch(e){}}else if(t===JSModes.BABEL){e.setOption("mode",modes.babel.tdMimeType);try{prettier.format(s,{parser:"babylon",plugins:prettierPlugins}),s=Babel.transform(s,{presets:["latest","stage-3","react"]}).code}catch(e){const t=e.message.split("\n")[0].split(" "),s=t[t.length-1];n={lang:"Babel",data:[{lineNumber:s.slice(1,s.length-1),message:e.message}]}}finally{o.resolve({code:s,error:n})}}else if(t===JSModes.JSX){e.setOption("mode",modes.jsx.tdMimeType);try{prettier.format(s,{parser:"babylon",plugins:prettierPlugins}),s=Babel.transform(s,{presets:["latest","stage-3","react"]}).code}catch(e){const t=e.message.split("\n")[0].split(" "),s=t[t.length-1];n={lang:"JSX",data:[{lineNumber:s.slice(1,s.length-1),message:e.message}]}}finally{o.resolve({code:s,error:n})}}return o.promise}function initState(e,t,s,o){htmlPre.addEventListener("change",t=>{const s=document.querySelector(".html-mode-name"),n=t.currentTarget.selectedOptions[0],r=n.getAttribute("data-name");s.textContent=`${r}`;const i=n.getAttribute("data-mode");csse.html=i||"",htmlPenState(e,i),o(),dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave()}),cssPre.addEventListener("change",e=>{const s=document.querySelector(".css-mode-name"),n=e.currentTarget.selectedOptions[0],r=n.getAttribute("data-name");s.textContent=`${r}`;const i=n.getAttribute("data-mode");csse.css=i||"",cssPenState(t,i),o(),dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave()}),jsPre.addEventListener("change",e=>{const t=document.querySelector(".js-mode-name"),n=e.currentTarget.selectedOptions[0],r=n.getAttribute("data-name");t.textContent=`${r}`;const i=n.getAttribute("data-mode");csse.js=i||"",jsPenState(s,i),o(),dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave()})}function returnStates(){return{html:csse.html,css:csse.css,js:csse.js}}function getPreview({html:e,css:t,js:s,meta:o,cssExt:n,jsExt:r,mode:i}){const a=[window.origin+"/static/preview/console.js"],c=(e,t)=>{const s=new Blob([e],{type:t});return URL.createObjectURL(s)},l="\n\nbody{\n    font-family: Helvetica, Arial, sans-serif;\n    background: white;\n}\n    ";i==JSModes.BABEL?a.push(window.origin+"/static/lib/transpilers/babel-polyfill.min.js"):i==JSModes.JSX&&a.push(window.origin+"/static/lib/transpilers/babel-polyfill.min.js");c(l,"text/css"),c(t,"text/css");const d=c(s,"text/javascript"),m=n.value.split("\n").reduce(function(e,t){return e+(t?'\n<link rel="stylesheet" type="text/css" href="'+t+'">':"")},""),u=r.value.split("\n").reduce(function(e,t){return e+(t?'\n<script src="'+t+'"><\/script>':"")},""),h=o.value.split("\n").reduce(function(e,t){return e+(t||"")},""),p=a.reduce((e,t)=>e+(t?"\n <script src='"+t+"'><\/script>":""),"");return c(`\n\n<!DOCTYPE html>\n    <html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <meta http-equiv="X-UA-Compatible" content="ie=edge">\n        ${h}\n        ${m}\n        <title>CodeCrumb - ${crumbName.crumb.value}</title>\n    </head>\n    ${p}\n    <body>\n    <style>\n      ${l}\n      ${t||""}\n    </style>\n        ${e||""}\n    </body>\n\n    ${u}\n    <script id="codecrumb-script" src="${d||""}"><\/script>\n\n    </html>\n\n    `,"text/html")}function animate(){function e(e){const t=htmlTab.getAttribute("data-tab"),s=cssTab.getAttribute("data-tab"),o=jsTab.getAttribute("data-tab");[htmlPen,cssPen,jsPen].forEach(n=>{const r=n.getAttribute("data-pen");e.currentTarget.getAttribute("data-tab")===t&&r===t?n.classList.add("pen-active"):e.currentTarget.getAttribute("data-tab")===s&&r===s?n.classList.add("pen-active"):e.currentTarget.getAttribute("data-tab")==o&&r===o?n.classList.add("pen-active"):n.classList.remove("pen-active")})}requestAnimationFrame(function(){[htmlTab,cssTab,jsTab].forEach(t=>{t.addEventListener("click",t=>{t.preventDefault();const s=t.currentTarget.classList,o=htmlTab.classList,n=cssTab.classList,r=jsTab.classList;!s.contains("active")&&o.contains("active")||r.contains("active")?(o.remove("active")||r.remove("active"),s.add("active"),e(t)):!s.contains("active")&&o.contains("active")||n.contains("active")?(o.remove("active")||n.remove("active"),s.add("active"),e(t)):(!s.contains("active")&&n.contains("active")||r.contains("active"))&&(n.remove("active")||r.remove("active"),s.add("active"),e(t))})});const t=[generalSettings,languageSettings,customSettings,balanceSettings,behaviourSettings,kbdSettings],s=[generalTab,languageTab,customTab,balanceTab,behaviourTab,kbdTab];s.forEach(e=>{e.addEventListener("click",s=>{const o=s.currentTarget.classList,n=generalTab.classList,r=languageTab.classList,i=customTab.classList,a=balanceTab.classList,c=behaviourTab.classList,l=kbdTab.classList;!o.contains("cover-active")&&n.contains("cover-active")||a.contains("cover-active")||c.contains("cover-active")||l.contains("cover-active")||i.contains("cover-active")?(n.remove("cover-active"),a.remove("cover-active"),c.remove("cover-active"),l.remove("cover-active"),i.remove("cover-active"),o.add("cover-active")):!o.contains("cover-active")&&r.contains("cover-active")||a.contains("cover-active")||c.contains("cover-active")||l.contains("cover-active")||i.contains("cover-active")?(r.remove("cover-active"),a.remove("cover-active"),c.remove("cover-active"),l.remove("cover-active"),i.remove("cover-active"),o.add("cover-active")):!o.contains("cover-active")&&r.contains("cover-active")||n.contains("cover-active")||c.contains("cover-active")||l.contains("cover-active")||i.contains("cover-active")?(r.remove("cover-active"),n.remove("cover-active"),c.remove("cover-active"),l.remove("cover-active"),i.remove("cover-active"),o.add("cover-active")):!o.contains("cover-active")&&r.contains("cover-active")||n.contains("cover-active")||a.contains("cover-active")||l.contains("cover-active")||i.contains("cover-active")?(r.remove("cover-active"),n.remove("cover-active"),a.remove("cover-active"),l.remove("cover-active"),i.remove("cover-active"),o.add("cover-active")):!o.contains("cover-active")&&r.contains("cover-active")||n.contains("cover-active")||a.contains("cover-active")||c.contains("cover-active")||i.contains("cover-active")?(r.remove("cover-active"),n.remove("cover-active"),a.remove("cover-active"),c.remove("cover-active"),i.remove("cover-active"),o.add("cover-active")):(!o.contains("cover-active")&&r.contains("cover-active")||n.contains("cover-active")||a.contains("cover-active")||c.contains("cover-active")||l.contains("cover-active"))&&(r.remove("cover-active"),n.remove("cover-active"),a.remove("cover-active"),c.remove("cover-active"),l.remove("cover-active"),o.add("cover-active")),function(e){t.forEach(t=>{e==generalTab?(t.classList.remove("settings-active"),generalSettings.classList.add("settings-active")):e==languageTab?(t.classList.remove("settings-active"),languageSettings.classList.add("settings-active")):e==balanceTab?(t.classList.remove("settings-active"),balanceSettings.classList.add("settings-active")):e==behaviourTab?(t.classList.remove("settings-active"),behaviourSettings.classList.add("settings-active")):e==kbdTab?(t.classList.remove("settings-active"),kbdSettings.classList.add("settings-active")):e==customTab&&(t.classList.remove("settings-active"),customSettings.classList.add("settings-active"))})}(e)})});let o=!1;settingsBtn.addEventListener("click",()=>{editorMenuMain.style.display="flex",editorMenuMain.style.animation="none"});const n=[htmlMode,cssMode,jsMode];window.addEventListener("click",e=>{e.target===editorMenuMain&&(o&&n.forEach(e=>{e.firstChild.style.color="#fff"}),editorMenuMain.style.display="none",editorMenuMain.style.animation="none")}),n.forEach(e=>{e.addEventListener("click",n=>{n.preventDefault(),e.firstChild.style.color="#fa0033",t.forEach(e=>{e.classList.contains("settings-active")&&(e.classList.remove("settings-active"),languageSettings.classList.add("settings-active"))}),s.forEach(e=>{e.classList.contains("cover-active")&&(e.classList.remove("cover-active"),languageTab.classList.add("cover-active"))}),editorMenuMain.style.animation="menu-in .1s ease forwards",editorMenuMain.style.display="flex",editorMenuMain.style.animation="none",o=!0})})}),window.addEventListener("load",function(){loader.firstElementChild.style.animation="none",loader.firstElementChild.style.willChange="none",loader.classList.add("load-off"),loader.style.display="none"}),function(){if(!localStorage.__defineEditorPresets__){let e={skin:"dark",editorStyle:"left",colorPicker:"default",linter:!0,autoComplete:!0,autoRunDelay:2e3,tabSize:2,indentUnit:2,fontLigature:!0,preserveLog:!0,activeLine:!0};localStorage.setItem("__defineEditorPresets__",JSON.stringify(e))}}()}window.addEventListener("beforeunload",function(e){if(htmlChangeNum>0&&!saveCrumbClicked||cssChangeNum>0&&!saveCrumbClicked||jsChangeNum>0&&!saveCrumbClicked)return e.returnValue="Changes you made have not been saved, Do you still want to reload?","Changes you made have not been saved, Do you still want to reload?"});class tabOptions{constructor(e=1,t=2,s="40%",o="60%",n="calc(100% - 100px)",r="calc(100% - 100px)",i="100%",a="100%",c="absolute",l="row",d="0",m="transparent",u="solid",h="transparent",p="none",g="flex",y="100vh",v="flex"){this.codeOrder=e,this.previewOrder=t,this.codeWidth=s,this.previewWidth=o,this.codeHeight=n,this.previewHeight=r,this.eHeight=i,this.eWidth=a,this.ePosition=c,this.editorContainerFlow=l,this.eBorder=d,this.eBorderStyle=u,this.eBorderColor=m,this.codeHeadBg=h,this.codeHeadBorder=p,this.editorTab=g,this.borderRight="7px",this.containerHeight=y,this.codeHeadDisplay=v}changeView(){const e=[htmlPen,cssPen,jsPen];editorPreview.style.order=this.previewOrder,code.style.order=this.codeOrder,code.style.width=this.codeWidth,editorPreview.style.width=this.previewWidth,code.style.height=this.codeHeight,editorPreview.style.height=this.previewHeight,e.forEach(e=>{e.style.height=this.eHeight}),e.forEach(e=>{e.style.width=this.eWidth}),e.forEach(e=>{e.style.position=this.ePosition}),e.forEach(e=>{e.style.border=this.eBorder,e.style.borderStyle=this.eBorderStyle,e.style.borderColor=this.eBorderColor,e.style.borderTop="0"}),Array.from(codeHead).forEach(e=>{e.style.background=this.codeHeadBg,e.style.borderBottom=this.codeHeadBorder,e.style.display=this.codeHeadDisplay}),Array.from(editorTab).forEach(e=>{e.style.display=this.editorTab}),editorContainer.style.flexFlow=this.editorContainerFlow,editorContainer.style.height=this.containerHeight}}const tabStyleLeftE=document.querySelector("#tab-style-left");tabStyleLeftE.addEventListener("click",tabStyleLeft);const tabStyleTabE=document.querySelector("#tab-style-tab");tabStyleTabE.addEventListener("change",tabStyleDefault);const tabStyleTopE=document.querySelector("#tab-style-top");tabStyleTopE.addEventListener("change",tabStyleTop);const tabStyleRightE=document.querySelector("#tab-style-right");tabStyleRightE.addEventListener("change",tabStyleRight);const tabStyleFullView=document.querySelector("#tab-full-view");function fullScreenPreview(){resetSplitPane(),new tabOptions(2,1,"0%","100%","0%","100%","0%","0%","relative","column","0","#0f111a","solid","#0f111a","0 solid #13161f","none","calc(100vh - 90px)","none").changeView(),__setEditorPreset__("editorStyle","full-view")}function tabStyleRight(){resetSplitPane(),resizePaneX([".editor-preview",".code-pen"],[56,44]),resetTransition(),[htmlResize,cssResize,jsResize].forEach(e=>{e.style.display="block"}),jsPen.classList.add("pen-active"),code.style.display="inline",htmlPen.classList.add("pen-active"),cssPen.classList.add("pen-active"),new tabOptions(3,1,"44%","56%","100%","100%","33.33%","100%","relative","row","none","none","none","#0f111a","2px solid #13161f","none","calc(100vh - 90px)","flex").changeView(),resizeHeight(33.33),editors.forEach(e=>{e.refresh()}),__setEditorPreset__("editorStyle","right")}function tabStyleLeft(){resetSplitPane(),resizePaneX([".code-pen",".editor-preview"],[44,56]),resetTransition(),[htmlResize,cssResize,jsResize].forEach(e=>{e.style.display="block"}),jsPen.classList.add("pen-active"),code.style.display="inline",htmlPen.classList.add("pen-active"),cssPen.classList.add("pen-active"),new tabOptions(1,3,"44%","56%","100%","100%","33.33%","100%","relative","row","none","none","none","#0f111a","2px solid #13161f","none","calc(100vh - 90px)","flex").changeView(),resizeHeight(33.33),editors.forEach(e=>{e.refresh()}),__setEditorPreset__("editorStyle","left")}function tabStyleDefault(){resetSplitPane(),resizePaneX([".code-pen",".editor-preview"],[44,56]);const e=[htmlTab,cssTab,jsTab];[htmlResize,cssResize,jsResize].forEach(e=>{e.style.display="none"}),resetTransition(),e.forEach(e=>{const t=e.getAttribute("data-tab");e.classList.contains("active")&&"html"===t?(jsPen.classList.remove("pen-active"),cssPen.classList.remove("pen-active")):e.classList.contains("active")&&"css"===t?(jsPen.classList.remove("pen-active"),cssPen.classList.add("pen-active"),htmlPen.classList.remove("pen-active")):e.classList.contains("active")&&"js"===t&&(htmlPen.classList.remove("pen-active"),cssPen.classList.remove("pen-active"),jsPen.classList.add("pen-active")),new tabOptions(1,2,"44%","57%","100%","100%","100%","100%","absolute","row","0","transparent","solid","transparent","none","flex","calc(100vh - 130px)","flex").changeView()}),editors.forEach(e=>{e.refresh()}),__setEditorPreset__("editorStyle","default")}function tabStyleTop(){resetSplitPane(),resetTransition(),[htmlResize,cssResize,jsResize].forEach(e=>{e.style.display="block"}),code.style.display="flex",jsPen.classList.add("pen-active"),htmlPen.classList.add("pen-active"),cssPen.classList.add("pen-active"),new tabOptions(1,3,"100%","100%","60%","40%","100%","33.33%","relative","column","5px","#0f111a","solid","#0f111a","none","none","calc(100vh - 90px)","flex").changeView(),resizePaneY([".code-pen",".editor-preview"],[60,40]),resizeWidth(),editors.forEach(e=>{e.refresh()}),__setEditorPreset__("editorStyle","top")}function resizeHeight(e){const t=htmlPen,s=cssPen,o=jsPen,n=100,r=40,i=100;let a=!0,c=!0,l=!0;const d=[t,s,o];function m(n){n.preventDefault(),t.style.transition="0.3s",s.style.transition="0.3s",o.style.transition="0.3s",t.style.height=`${e}%`,s.style.height=`${e}%`,o.style.height=`${e}%`,d.forEach(e=>{e.style.width=`${i}%`}),a=!0,c=!0,l=!0}[htmlResize,cssResize,jsResize].forEach(e=>{e.style.display="flex"}),htmlResize.addEventListener("click",e=>{a?function(e){e.preventDefault(),t.style.transition="0.3s",s.style.transition="0.3s",o.style.transition="0.3s",t.style.height=`calc(${n}% - 80px)`,s.style.height=`${r}px`,o.style.height=`${r}px`,d.forEach(e=>{e.style.width=`${i}%`}),Array.from(codeHead).forEach(e=>{e.style.height=`${r}px`}),a=!1,c=!0,l=!0}(e):m(e)}),cssResize.addEventListener("click",e=>{c?function(e){e.preventDefault(),t.style.transition="0.3s",s.style.transition="0.3s",o.style.transition="0.3s",t.style.height=`${r}px`,s.style.height=`calc(${n}% - 80px)`,o.style.height=`${r}px`,d.forEach(e=>{e.style.width=`${i}%`}),c=!1,a=!0,l=!0,Array.from(codeHead).forEach(e=>{e.style.height=`${r}px`})}(e):m(e)}),jsResize.addEventListener("click",e=>{l?function(e){e.preventDefault(),t.style.transition="0.3s",s.style.transition="0.3s",o.style.transition="0.3s",t.style.height=`${r}px`,s.style.height=`${r}px`,o.style.height=`calc(${n}% - 80px)`,d.forEach(e=>{e.style.width=`${i}%`}),l=!1,a=!0,c=!0,Array.from(codeHead).forEach(e=>{e.style.height=`${r}px`})}(e):m(e)})}function resizeWidth(){const e=70,t=15,s=100,o=33.3;let n=!0,r=!0,i=!0;const a=[htmlPen,cssPen,jsPen];function c(e){e.preventDefault(),htmlPen.style.transition="0.3s",cssPen.style.transition="0.3s",jsPen.style.transition="0.3s",htmlPen.style.width=`${o}%`,cssPen.style.width=`${o}%`,jsPen.style.width=`${o}%`,a.forEach(e=>{e.style.height=`${s}%`}),editors.forEach(e=>{e.refresh()}),n=!0,r=!0,i=!0}[htmlResize,cssResize,jsResize].forEach(e=>{e.style.display="flex"}),htmlResize.addEventListener("click",o=>{n?function(o){o.preventDefault(),htmlPen.style.transition="0.3s",cssPen.style.transition="0.3s",jsPen.style.transition="0.3s",htmlPen.style.width=`${e}%`,cssPen.style.width=`${t}%`,jsPen.style.width=`${t}%`,a.forEach(e=>{e.style.height=`${s}%`}),n=!1,r=!0,i=!0}(o):c(o)}),cssResize.addEventListener("click",o=>{r?function(o){o.preventDefault(),htmlPen.style.transition="0.3s",cssPen.style.transition="0.3s",jsPen.style.transition="0.3s",htmlPen.style.width=`${t}%`,cssPen.style.width=`${e}%`,jsPen.style.width=`${t}%`,a.forEach(e=>{e.style.height=`${s}%`}),r=!1,n=!0,i=!0}(o):c(o)}),jsResize.addEventListener("click",o=>{i?function(o){o.preventDefault(),htmlPen.style.transition="0.3s",cssPen.style.transition="0.3s",jsPen.style.transition="0.3s",htmlPen.style.width=`${t}%`,cssPen.style.width=`${t}%`,jsPen.style.width=`${e}%`,a.forEach(e=>{e.style.height=`${s}%`}),i=!1,n=!0,r=!0}(o):c(o)})}function resetTransition(){htmlPen.style.transition="0s",cssPen.style.transition="0s",jsPen.style.transition="0s"}function resizePaneY(e,t){gutterHori.style.order="2",Split(e,{direction:"vertical",sizes:t,minSize:[40,0],gutter:function(e,t){return gutterHori.classList.add("gutter"),gutterHori.classList.add("gutter-"+t),gutterHori.style.width="100%",gutterHori},gutterSize:10,dragInterval:10,elementStyle:function(e,t,s){return{height:"calc("+t+"% - "+s+"px)",width:"100%"}},gutterStyle:function(e,t){return{height:t+"px"}}})}function resizePaneX(e,t){gutterHori.style.order="2",Split(e,{sizes:t,minSize:[200,200],direction:"horizontal",gutter:function(e,t){return gutterHori.classList.add("gutter"),gutterHori.classList.add("gutter-"+t),gutterHori.style.height="100%",gutterHori.style.width="5px",gutterHori},gutterSize:10,dragInterval:10,elementStyle:function(e,t,s){return{width:"calc("+t+"% - "+s+"px)",height:"100%"}},gutterStyle:function(e,t){return{width:t+"px"}}})}function resetSplitPane(){gutterHori.style.order="2",gutterHori.classList.remove("gutter"),gutterHori.classList.remove("gutter-horizontal"),gutterHori.classList.remove("gutter-vertical"),gutterHori.style.height="0",gutterHori.style.width="0";const e=document.querySelectorAll(".resizable");Array.from(e).forEach(e=>{e.classList.remove("gutter"),e.classList.remove("gutter-horizontal"),e.classList.remove("gutter-vertical"),e.style.width="0",e.style.height="0"}),editors.forEach(e=>{e.refresh()})}tabStyleFullView.addEventListener("change",fullScreenPreview),resizeHeight(33.33),resizePaneX([".code-pen",".editor-preview"],[44,56]);const resizeBoth=document.querySelector(".resize-both");function showHints(e){CodeMirror.registerGlobalHelper("hint","emmet",function(e,t){return!!t.getEmmetAbbreviation()},function(e,t){const s=e.findEmmetMarker();if(!s)return;clearTimeout(s.popupDisableTimer),s.autoPopupDisabled=!1;const o=e.getEmmetCompletions();return o&&{from:o.from,to:o.to,list:o.list.map(function(e){return{from:e.range.from,to:e.range.to,render:function(t){var s=document.createDocumentFragment(),o=document.createElement("span");o.className="emmet-label";var n=document.createElement("span");n.className="emmet-preview",s.appendChild(o),s.appendChild(n),"expanded-abbreviation"===e.type?(o.className+=" emmet-label__expand",o.textContent="Expand abbreviation",n.className+=" emmet-preview__expand",n.textContent=e.preview.replace(/\t/g,"  ")):(o.textContent=e.name,n.textContent=e.preview),t.appendChild(s)},hint:function(){e.insert()}}})}}),e.on("cursorActivity",function(){if(e.getOption("markEmmetAbbreviation")){const t=e.findEmmetMarker();t&&!t.autoPopupDisabled&&e.showHint({completeSingle:!1})}}),e.on("startCompletion",function(){var t=e.findEmmetMarker();t&&(clearTimeout(t.popupDisableTimer),t.popupDisableTimer=null)}),e.on("endCompletion",function(){var t=e.findEmmetMarker();t&&(clearTimeout(t.popupDisableTimer),t.popupDisableTimer=setTimeout(function(){t.autoPopupDisabled=!0},30))})}function cleanFont(e){return e.split(",").map(e=>e.match(/[a-zA-Z]+\s/)?`"${e.trim(" ")}"`:e).join(",")}function lint(e){htmlEditor.setOption("lint",e),cssEditor.setOption("lint",e),jsEditor.setOption("lint",e)}function hint(){const e=[htmlEditor,cssEditor,jsEditor];showHints(htmlEditor),showHints(cssEditor),showHints(jsEditor),e.forEach(e=>{e.setOption("extrakeys",{"Ctrl-Q":function(e){e.foldCode(e.getCursor())},"Alt-f":"findPersistent","Ctrl-S":function(){if(dataItems.author){if("anonymous"===dataItems.author)return null;keyMapSave()}else keyMapSave()},"Ctrl-Enter":function(){updatePreview()},"Alt-J":function(){beautifySingleFile(jsEditor,csse.js)},"Alt-C":function(){beautifySingleFile(cssEditor,csse.css)},"Alt-H":function(){beautifySingleFile(htmlEditor,csse.html)},"Alt-A":function(){prettify(htmlEditor,cssEditor,jsEditor)},"Ctrl-Space":"autocomplete",Tab:"emmetExpandAbbreviationAll","Ctrl-E":"emmetExpandAbbreviationAll",Enter:"emmetInsertLineBreak","Ctrl-W":"emmetWrapWithAbbreviation","Ctrl-/":"toggleComment"}),e.setOption("markEmmetAbbreviation",!0),e.on("keypress",function(t){13!=t.keyCode&&e.showHint({completeSingle:!1,alignWithWord:!0,closeOnUnfocus:!0,closeOnBackspace:!0})}),e.on("cursorActivity",e=>{CodeMirror.commands.autocomplete=function(e){e.showHint({hint:CodeMirror.hint.emoji,completeSingle:!1,alignWithWord:!0})}})})}function colorPicker(){[htmlEditor,cssEditor].forEach(e=>{e.setOption("colorpicker",{mode:"edit"}),e.setOption("extraKeys",{"Ctrl-K":function(e,t){e.state.colorpicker.popup_color_picker()}})})}function settingButtons(e,t,s,o,n,r,i,a,c){let l,d=2e3;const m=document.querySelectorAll('input[type="checkbox"]');Array.from(m).forEach(r=>{r.addEventListener("change",r=>{const i=r.currentTarget;if(i.checked&&"numbers"==i.name?o.forEach(e=>{e.setOption("lineNumbers",!0)}):i.checked||"numbers"!=i.name||o.forEach(e=>{e.setOption("lineNumbers",!1)}),i.checked&&"wrap"===i.name?o.forEach(e=>{e.setOption("lineWrapping",!0)}):i.checked||"wrap"!==i.name||o.forEach(e=>{e.setOption("lineWrapping",!1)}),i.checked&&"active"==i.name?(o.forEach(e=>{e.setOption("styleActiveLine",!0)}),__setEditorPreset__("activeLine",!0)):i.checked||"active"!=i.name||(o.forEach(e=>{e.setOption("styleActiveLine",!1)}),__setEditorPreset__("activeLine",!1)),i.checked&&"complete"===i.name?(hint(),__setEditorPreset__("autoComplete",!0)):i.checked||"complete"!==i.name||(o.forEach(o=>{o.setOption("extrakeys",{"Ctrl-Q":function(e){e.foldCode(e.getCursor())},"Alt-f":"findPersistent","Ctrl-Enter":function(){n()},"Alt-A":function(){prettify(e,t,s)},"Ctrl-Space":!1,"Ctrl-/":"toggleComment"}),o.setOption("markEmmetAbbreviation",!1),o.on("keypress",function(){o.closeHint()}),o.closeHint()}),__setEditorPreset__("autoComplete",!1)),i.checked&&"tags"===i.name?o.forEach(e=>{e.setOption("autoCloseTags",!0)}):i.checked||"tags"!==i.name||o.forEach(e=>{e.setOption("autoCloseTags",!1)}),i.checked&&"brackets"===i.name?o.forEach(e=>{e.setOption("autoCloseBrackets",!0)}):i.checked||"brackets"!==i.name||o.forEach(e=>{e.setOption("autoCloseBrackets",!1)}),i.checked&&"linter"==i.name?(lint(!0),__setEditorPreset__("linter",!0)):i.checked||"linter"!=i.name||(lint(!1),__setEditorPreset__("linter",!1)),i.checked&&"run"==i.name?o.forEach(e=>{e.on("inputRead",function(){requestAnimationFrame(()=>{clearTimeout(l),l=setTimeout(n,d)}),console.clear()})}):i.checked||"run"!=i.name||o.forEach(e=>{e.on("inputRead",function(){requestAnimationFrame(()=>{clearTimeout(l),l=setTimeout(null,d)})})}),i.checked&&"preserve-log"==i.name?(i.setAttribute("data-log","true"),__setEditorPreset__("preserveLog",!0)):i.checked||"preserve-log"!=i.name||(i.setAttribute("data-log","false"),__setEditorPreset__("preserveLog",!1)),i.checked&&"color-picker"==i.name)colorPicker(),document.querySelector(".enable-text").textContent="Disable color picker";else if(!i.checked&&"color-picker"==i.name){[e,t,s].forEach(e=>{e.setOption("colorpicker",{mode:!1})}),document.querySelector(".enable-text").textContent="Enable color picker"}})}),a.addEventListener("change",function(){dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave();const e=document.querySelectorAll(".CodeMirror");Array.from(e).forEach(e=>{const t=parseInt(this.selectedOptions[0].getAttribute("name"));customFSize.value=t,e.style.fontSize=`${parseInt(customFSize.value,10)}px`})}),customFSize.addEventListener("keypress",function(e){if(13===e.keyCode){dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave();const e=document.querySelectorAll(".CodeMirror");Array.from(e).forEach(e=>{const t=parseInt(this.value);e.style.fontSize=t<5?"0px":`${t}px`}),customFSize.blur()}}),document.querySelector(".tab-size").addEventListener("change",function(){const o=document.querySelector(".tab-num"),n=parseInt(this.selectedOptions[0].value,10);e.setOption("indentUnit",n),t.setOption("indentUnit",n),s.setOption("indentUnit",n),o.textContent=`${n}`,__setEditorPreset__("tabSize",n)});const u=document.querySelector(".indent-unit");function h(e){if("keypress"===e.type){if(13===e.keyCode){const e=document.querySelectorAll(".CodeMirror");Array.from(e).forEach(e=>{const t=cleanFont(fontFmCustom.value);e.style.fontFamily=`${t}, monospace`}),fontFmCustom.blur(),dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave()}}else if("blur"===e.type){const e=document.querySelectorAll(".CodeMirror");Array.from(e).forEach(e=>{const t=cleanFont(fontFmCustom.value);e.style.fontFamily=`${t}, monospace`}),fontFmCustom.blur(),dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave()}}u.addEventListener("change",function(){const o=parseInt(u.selectedOptions[0].textContent);e.setOption("indentUnit",o),t.setOption("indentUnit",o),s.setOption("indentUnit",o),__setEditorPreset__("indentUnit",o)}),i.addEventListener("change",function(){const e=document.querySelectorAll(".CodeMirror");dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave();Array.from(e).forEach(e=>{const t=this.selectedOptions[0].getAttribute("name");fontFmCustom.value=`${t}, Monospace`,e.style.fontFamily=fontFmCustom.value})}),fontFmCustom.addEventListener("keypress",h),fontFmCustom.addEventListener("blur",h),r.addEventListener("change",function(){dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave();[e,t,s].forEach(e=>{const t=this.selectedOptions[0].getAttribute("name");e.setOption("theme",t)})}),c.addEventListener("change",function(){dataItems.author&&!0===dataItems.arg&&"anonymous"!=dataItems.author&&keyMapSave();[e,t,s].forEach(e=>{const t=this.selectedOptions[0].getAttribute("name");e.setOption("keyMap",t)})}),fontLigatures.addEventListener("change",function(){const e=document.querySelectorAll(".CodeMirror pre");Array.from(e).forEach(e=>{fontLigatures.checked?e.style.fontVariantLigatures="contextual":fontLigatures.checked||(e.style.fontVariantLigatures="none")}),fontLigatures.checked?__setEditorPreset__("fontLigature",!0):__setEditorPreset__("fontLigature",!1)}),colorPickerType.addEventListener("change",function(){[e,t].forEach(e=>{e.setOption("colorpicker",!1),e.setOption("colorpicker",{mode:"edit",type:colorPickerType.selectedOptions[0].value})}),__setEditorPreset__("skin",colorPickerType.selectedOptions[0].value)}),autoRunDelay.addEventListener("keypress",function(e){13===e.keyCode&&(d=parseInt(this.value,10),autoRunDelay.blur(),__setEditorPreset__("autoRunDelay",parseInt(this.value,10)))})}function changeEditorSettings(e,t,s,o,n,r,i,a){r.namedItem(o.font.split(",")[0])&&(r.options.selectedIndex=r.namedItem(o.font.split(",")[0]).index),i.namedItem(o.fSize)&&(i.options.selectedIndex=i.index),n.namedItem(o.theme)&&(n.options.selectedIndex=n.namedItem(o.theme).index),a.namedItem(o.keymap)&&(a.options.selectedIndex=a.namedItem(o.keymap).index);const c=document.querySelectorAll(".CodeMirror"),l=Array.from(c);[l[1],l[2],l[3]].forEach(e=>{customFSize.value=o.fSize,e.style.fontSize=`${parseInt(customFSize.value,10)}px`;const t=o.font;e.style.fontFamily=`${t}, monospace`;const s=t.split('"').join(" ").split(",").map(e=>e.trim()).join(", ");fontFmCustom.value=`${s}`}),[e,t,s].forEach(e=>{e.setOption("theme",o.theme),e.setOption("keyMap",o.keymap)})}function handleFooterLnCol(){const e=document.querySelector(".ln"),t=document.querySelector(".ch"),s=document.querySelector(".line-selected");editors.forEach(o=>{const n=document.querySelector(".editor-mode");o.on("cursorActivity",()=>{const r=o.getCursor();let i=r.line,a=r.ch;e.innerText=`${i}`,t.innerText=`${a}`,o===htmlEditor?(n.style.opacity="1",n.innerText=`${csse.html}`,n.style.margin="4px",n.style.padding="5px"):o===cssEditor?(n.innerText=`${csse.css}`,n.style.opacity="1",n.style.margin="4px",n.style.padding="5px"):o===jsEditor&&(n.style.opacity="1","babel"===csse.js?n.innerText="javascript with babel":"jsx"===csse.js?n.innerText="javascript with react":n.innerText=`${csse.js}`,n.style.margin="4px",n.style.padding="5px");const c=o.getSelection().split("\n").join("").length;s.textContent=c>=1?`(${c} selected)`:""})})}function changeEditorSkin(e){const t={dark:{"--editor-color":"rgba(19, 22, 31, 1)","--page-color":"#0f111a","--def-color":"rgba(108, 103, 131, 0.61)","--def-color-solid":"rgba(108, 103, 131, 1)","--settings-color":"#aaa","--def-bg":"#1f222c","--light":"white","--light-solid":"#ddd","--light-solid-2":"#ccc","--svg-fill":"#6c6783","--settings-border-2":"rgba(38, 44, 63, 0.801)","--textarea-bg":"rgba(19, 22, 31, 1)","--textarea-border":"rgba(38, 44, 63, 0.801)"},darkplus:{"--editor-color":"#11131A","--page-color":"#090b10","--def-color":"rgba(108, 103, 131, 0.61)","--def-color-solid":"rgba(108, 103, 131, 1)","--settings-color":"#aaa","--def-bg":"#1f222c","--light":"white","--light-solid":"#ddd","--light-solid-2":"#ccc","--svg-fill":"#6c6783","--settings-border-2":"rgba(38, 44, 63, 0.801)","--textarea-bg":"rgba(20, 24, 29, 0.361)","--textarea-border":"rgba(116, 124, 148, 0.7)"}}[e];let s;for(s in t)document.documentElement.style.setProperty(s,t[s])}function keyboardShortCuts(e,t,s,o){document.addEventListener("keyup",t=>{t.altKey&&80==t.keyCode&&(editorMenuMain.style.animation="blink-in .2s ease-in-out",editorMenuMain.style.display="flex"),t.altKey&&82==t.keyCode&&e(),t.altKey&&84==t.keyCode&&(tabStyleTop(),tabStyleTopE.checked=!0),t.altKey&&78==t.keyCode&&(tabStyleDefault(),tabStyleTabE.checked=!0),t.altKey&&77==t.keyCode&&(tabStyleRight(),tabStyleRightE.checked=!0),t.altKey&&76==t.keyCode&&(tabStyleLeft(),tabStyleLeftE.checked=!0),t.altKey&&79==t.keyCode&&(fullScreenPreview(),tabStyleFullView.checked=!0)})}function postError(e){if(e){let t=parseInt(outnum.getAttribute("data-error"));t++,outnum.setAttribute("data-error",`${t}`);const s=e.message,o=`\n[${e.lang.toUpperCase()}] ${s}`;consoleEditor.replaceRange(o,CodeMirror.Pos(consoleEditor.lastLine())),outnum.textContent=`${t}`}}function prettify(e,t,s){let o,n,r,i,a=modes[csse.html].parser,c=modes[csse.css].parser,l=modes[csse.js].parser;try{o=prettier.format(e.getValue(),{parser:a,plugins:prettierPlugins})}catch(e){postError(i={message:e.message,lang:"HTML"})}try{n=prettier.format(t.getValue(),{parser:c,plugins:prettierPlugins})}catch(e){postError(i={message:e.message,lang:"CSS"})}try{r=prettier.format(s.getValue(),{parser:l,plugins:prettierPlugins})}catch(e){postError(i={message:e.message,lang:"JS"})}returnCursor(e,o),returnCursor(t,n),returnCursor(s,r)}function returnCursor(e,t){try{const s=e.lastLine();e.getDoc().setValue(t),e.setCursor(s,0)}catch(e){console.log(e.message)}}function beautifySingleFile(e,t){let s,o,n=modes[t].parser;try{s=prettier.format(e.getValue(),{parser:n,plugins:prettierPlugins})}catch(e){postError(o={message:e.message,lang:t.toUpperCase()})}returnCursor(e,s)}function preBeautify(e,t,s){let o,n,r=modes[s].parser;try{o=prettier.format(t,{parser:r,plugins:prettierPlugins})}catch(e){postError(n={message:e.message,lang:s.toUpperCase()})}e.getDoc().setValue(o)}function beautifyExport(e,t){let s;try{s=prettier.format(e,{parser:t,plugins:prettierPlugins})}catch(t){s=e}return s}preview.contentWindow.onresize=function(){resizeFrame.innerHTML=`${this.innerWidth}px &times; ${this.innerHeight}px`,consoleInput.offsetWidth<=400?consoleInput.style.fontSize="0.8rem":consoleInput.offsetWidth<=300?consoleInput.style.fontSize="0.7rem":200==consoleInput.offsetWidth?consoleInput.style.fontSize="0.65rem":consoleInput.style.fontSize="0.95rem"},preview.addEventListener("load",()=>{preview.contentWindow.onresize=function(){resizeFrame.innerHTML=`${this.innerWidth}px &times; ${this.innerHeight}px`,consoleInput.offsetWidth<=400?consoleInput.style.fontSize="0.8rem":consoleInput.offsetWidth<=300?consoleInput.style.fontSize="0.7rem":200==consoleInput.offsetWidth?consoleInput.style.fontSize="0.65rem":consoleInput.style.fontSize="0.95rem"}}),resizeBoth.addEventListener("mousedown",()=>{resizeFrame.parentElement.style.opacity="1"}),resizeBoth.addEventListener("mouseup",()=>{resizeFrame.parentElement.style.opacity="0"}),lint(!0),hint(),colorPicker(),function(){let e=localStorage.__defineEditorPresets__;if(localStorage.__defineEditorPresets__){const t=JSON.parse(e),s=[htmlEditor,cssEditor,jsEditor];changeEditorSkin(t.skin),s.forEach(e=>{e.setOption("tabSize",t.tabSize),e.setOption("indentUnit",t.indentUnit),e.setOption("styleActiveLine",t.activeLine),e.setOption("colorPicker",{mode:"edit",type:t.colorPicker}),e.setOption("lint",t.linter),e.setOption("markEmmetAbbreviation",!1),e.on("keypress",function(){e.closeHint()}),e.closeHint()})}}(),handleFooterLnCol(),toggleLinter.addEventListener("click",()=>{const e=document.querySelector("#linter-check");console.log(linterITag,e.checked),e.checked?(toggleLinter.setAttribute("data-label","Linter: off"),linterITag.innerText="clear",e.checked=!1,lint(!1)):e.checked||(toggleLinter.setAttribute("data-label","Linter: on"),linterITag.innerText="done",e.checked=!0,lint(!0))}),editorSkins.addEventListener("change",e=>{changeEditorSkin(editorSkins.selectedOptions[0].value),__setEditorPreset__("skin",editorSkins.selectedOptions[0].value)});class Timer{constructor(e,t,s,o){this.restTime=e,this.beBackTime=t,this.stopwatch=s,this.rest=o,this.paused=!1,this.running=!1,this.isActive=!1,this.__onBreak=!1,this.time=0,this.timerActive,this.timeInt}startTimer(){if(clearTimeout(this.timerActive),this.running||(this.paused=!1),!this.paused){const e=Math.floor(this.time%60),t=Math.floor(this.time/60%60),s=Math.floor(this.time/3600);this.time++;const o=e<10?`0${e}`:e,n=t<10?`0${t}`:t,r=s<10?`0${s}`:s;this.stopwatch.textContent=`${r}:${n}:${o}`,this.stopwatch.style.color="#fff",this.running=!0,this.isActive=!0,this.timerActive=setTimeout(()=>this.startTimer(),1e3)}}pauseTimer(){this.running&&(this.paused=!0,clearTimeout(this.timerActive),this.running=!1,this.stopwatch.style.color="rgba(108,103,131,0.61)")}restartTimer(){this.running&&(this.time=0,this.running=!1,clearTimeout(this.timerActive),this.startTimer(),this.stopwatch.style.color="#fff")}stopTimer(){this.__onBreak||(this.time=0,clearTimeout(this.timerActive),this.running=!1,this.isActive=!1,this.stopwatch.textContent="00:00:00",this.stopwatch.style.color="#ffffff")}getBreakTime(e){if(this.isActive){clearInterval(this.timeInt),this.__onBreak=!0;const t=Date.now()+1e3*e;this.displayBreakTime(e),this.getBreakEnd(t),timer.pauseTimer(),this.timeInt=setInterval(()=>{const e=Math.round((t-Date.now())/1e3);if(e<0)return clearInterval(this.timeInt),this.__onBreak=!1,this.paused&&this.isActive&&this.startTimer(),this.beBackTime.textContent="00:00",this.beBackTime.style.color="rgba(108,103,131,0.61)",this.restTime.style.color="rgba(108,103,131,0.61)",void Array.from(rest).forEach(e=>{e.classList.remove("rest-clicked")});this.displayBreakTime(e)},1e3)}}displayBreakTime(e){const t=Math.floor(e/3600),s=Math.floor(e/60%60),o=Math.floor(e%60),n=t<10?`0${t}`:t,r=s<10?`0${s}`:s,i=o<10?`0${o}`:o;this.restTime.textContent=`${n}:${r}:${i}`,this.restTime.style.color="#fff"}getBreakEnd(e){const t=new Date(e),s=t.getHours(),o=t.getMinutes(),n=s>12?s-12:s;this.beBackTime.textContent=`${n<10?"0"+n:n}:${o<10?"0"+o:o}`,this.beBackTime.style.color="#fff"}displayDate(){const e=document.querySelector(".balance-date"),t=moment().format("dddd, MMMM Do, YYYY");e.textContent=t}}const restTime=document.querySelector(".rest-time"),beBackTime=document.querySelector(".be-back-time"),rest=document.querySelectorAll(".rest"),stopwatch=document.querySelector(".elapsed"),timer=new Timer(restTime,beBackTime,stopwatch,rest);Array.from(rest).forEach(e=>{e.addEventListener("click",setBreak)}),Array.from(rest).forEach(e=>{e.addEventListener("click",function(e){timer.isActive&&(this.classList.contains("rest-clicked")||(Array.from(rest).forEach(e=>{e.classList.remove("rest-clicked")}),this.classList.add("rest-clicked")))})});const start=document.querySelector(".start-timer"),pause=document.querySelector(".pause-timer"),restart=document.querySelector(".restart-timer"),stop=document.querySelector(".stop-timer");let __startTimer=!0;function setBreak(){const e=parseInt(60*this.dataset.minute);timer.getBreakTime(e)}document.balanceForm.addEventListener("submit",function(e){e.preventDefault();const t=parseInt(60*this.minutes.value);this.reset(),timer.getBreakTime(t)}),start.addEventListener("click",function(){__startTimer&&(timer.startTimer(),__startTimer=!1)}),pause.addEventListener("click",function(){timer.pauseTimer(),__startTimer=!0}),restart.addEventListener("click",function(){timer.restartTimer()}),stop.addEventListener("click",function(){timer.stopTimer(),__startTimer=!0}),timer.displayDate();const consoleClose=document.querySelector(".out-close"),error=document.querySelector(".console-label"),consoleBtnITag=document.querySelector(".opc"),closeConsole=document.querySelector(".to-close"),fullscreen=document.querySelector(".to-fullscreen"),exitFullscreen=document.querySelector(".exit-fullscreen");class ProxyConsole{constructor(e,t,s,o,n,r,i){this.consoleClosed=!0,this.errorElement=e,this.consoleText=t,this.consoleElement=s,this.consoleCont=o,this.logElement=n,this.consoleBar=r,this.consoleInput=i,this.dashes="---------------------------------------",this.word="console.log( (89 * 78) / (64 % 6) - (90 + 120) )",this.time=0}printToConsole(e){const t=e.data.error?{lang:"JS",data:{message:e.data.message,lineNumber:e.data.lineno,columnNumber:e.data.colno,src:e.source}}:{lang:"JS",data:{message:e.data.message}};this.printMessage(t,e)}printMessage(e,t){if(e&&t.data.error){this.updateErrorCount();const t=e.data.message,s=e.lang,o=e.data.lineNumber,n=e.data.columnNumber,r=`\n${this.dashes}\n[${s.toUpperCase()}] ${t} \n\t\t\t\t at main(${o}:${n})\n${this.dashes}`;this.logElement.checked?this.consoleElement.replaceRange(r,CodeMirror.Pos(this.consoleElement.lastLine()+1)):this.logElement.checked||this.consoleElement.getDoc().setValue(r),this.consoleClosed||this.consoleElement.setCursor(this.consoleElement.lastLine(),3);let i=parseInt(this.errorElement.getAttribute("data-error"));this.errorElement.textContent=`${i}`}else if(e&&t.data.console){const t=e.data.message,s=e.lang,o=`\n${this.dashes}\n[${s.toUpperCase()}] ${t}`;this.logElement.checked?this.consoleElement.replaceRange(o,CodeMirror.Pos(this.consoleElement.lastLine()+1)):this.logElement.checked||this.consoleElement.getDoc().setValue(o),this.consoleClosed||this.consoleElement.setCursor(this.consoleElement.lastLine(),3)}else e&&t.data.clear&&(this.clearProxyConsole(),this.consoleClosed||this.consoleElement.setCursor(this.consoleElement.lastLine(),3))}updateErrorCount(){let e=parseInt(this.errorElement.getAttribute("data-error"));const t=++e;let s=parseInt(this.consoleBar.getAttribute("data-label"));s++,this.errorElement.setAttribute("data-error",`${t}`),s>1?consoleBar.setAttribute("data-label",`${s} errors.`):consoleBar.setAttribute("data-label",`${s} error.`)}clearProxyConsole(){parseInt(this.errorElement.getAttribute("data-error"));this.consoleElement.getDoc().setValue("# Console was cleared."),this.errorCount=0,this.errorElement.setAttribute("data-error","0"),this.consoleBar.setAttribute("data-label","0 errors"),this.errorElement.textContent="0",console.clear()}hideConsole(){this.consoleCont.classList.add("is_minimised"),this.consoleClosed=!0}showConsole(){this.consoleCont.classList.remove("is_minimised"),requestAnimationFrame(()=>{setTimeout(()=>{this.consoleElement.setCursor(this.consoleElement.lastLine(),3)},500)}),this.consoleClosed=!1}evaluateConsoleInput(){this.consoleElement.replaceRange(`\n${this.dashes}\n'>>>'\t${this.consoleInput.value}`,CodeMirror.Pos(this.consoleElement.lastLine()+1));try{e=`console.log(${this.consoleInput.value})`,preview.contentWindow.Function('"use strict"; return ('+e+")")()}catch(e){let t=e.message.split("\n")[0];this.consoleElement.replaceRange(`\n${this.dashes}\n'<<<'\t${t}`,CodeMirror.Pos(this.consoleElement.lastLine()+1)),this.consoleElement.setCursor(this.consoleElement.lastLine(),3)}var e;this.consoleInput.value=""}typeWrite(){if(this.time<this.word.length){let e=this.word.charAt(this.time),t=this.consoleInput.getAttribute("placeholder")+e;this.consoleInput.setAttribute("placeholder",t),this.time++,setTimeout(()=>this.typeWrite(),90)}}}const proxyConsole=new ProxyConsole(error,consoleBtn,consoleEditor,consoleOutput,preserveLog,consoleBar,consoleInput);function exportToZip(){const e=HtmlCompile(htmlEditor,csse.html),t=CSSCompile(cssEditor,csse.css),s=JSCompile(jsEditor,csse.js);Promise.all([e,t,s]).then(e=>{!function(e,t,s){const o=crumbName.crumb.value,n=jsLib.value.split("\n").reduce(function(e,t){return e+(t?'\n<script src="'+t+'"><\/script>':"")},""),r=cssLib.value.split("\n").reduce(function(e,t){return e+(t?'\n<link rel="stylesheet" href="'+t+'">':"")},""),i=`\n  <!DOCTYPE html>\n  <html lang="en">\n      <head>\n          <meta charset="UTF-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <meta http-equiv="X-UA-Compatible" content="ie=edge">\n          ${metaLib.value}\n          <title>${o}</title>\n          ${r}\n          ${n}\n          <link href="./style.css" rel="stylesheet">\n      </head>\n      <body>\n          ${e}\n          <script src="./script.js"><\/script>\n      </body>\n  </html>\n    `,a=window.location.href,c=window.location.pathname.split("/")[3],l={html:{html:"html",pug:"pug",markdown:"markdown"},css:{css:"css",less:"less",scss:"scss",sass:"sass",stylus:"styl"},js:{javascript:"js",typescript:"ts",coffeescript:"coffeescript",babel:"js",jsx:"jsx"}};!function(e){const t=window.location.origin;fetch(`${t}/crumbs/exports`,{method:"POST",headers:new Headers({"content-type":"application/json"}),cache:"no-cache",credentials:"include",body:e}).then(e=>e.json()).then(e=>{window.location.href=`${window.origin}/crumbs/exports/${e.request}`,exportFile.textContent="Export as ZIP"}).catch(e=>new Error(e))}(JSON.stringify({src:{html:htmlEditor.getValue(),css:cssEditor.getValue(),js:jsEditor.getValue(),htmlExt:l.html[csse.html],cssExt:l.css[csse.css],jsExt:l.js[csse.js]},dist:{html:beautifyExport(i,"html"),css:beautifyExport(t,"css"),js:beautifyExport(s,"babylon")},url:c,README:`Happy coding! ðŸš€\n\n#Introducton. \nA Crumb created at CodeCrumb.io. Original URL: [${crumbName.crumb.value}](${a}).`}))}(e[0].code,e[1].code,e[2].code)})}window.addEventListener("message",function(e){proxyConsole.printToConsole(e)}),clearConsole.addEventListener("click",()=>{proxyConsole.clearProxyConsole()}),consoleBtn.addEventListener("click",()=>{consoleBtnITag.innerText="visibility",proxyConsole.showConsole(),proxyConsole.typeWrite()}),closeConsole.addEventListener("click",()=>{consoleBtnITag.innerText="visibility_off",consoleOutput.style.transition="transform .4s cubic-bezier(.38,.39,.28,.95)",proxyConsole.hideConsole(),consoleOutput.style.height="66.66%"}),consoleInput.addEventListener("focus",updatePreview,{once:!0}),consoleInput.addEventListener("keypress",e=>{13===e.keyCode&&proxyConsole.evaluateConsoleInput()}),fullscreen.addEventListener("click",e=>{consoleOutput.style.height="100%",consoleOutput.style.transition="height .4s cubic-bezier(.38,.39,.28,.95)"}),exitFullscreen.addEventListener("click",e=>{consoleOutput.style.height="66.66%",consoleOutput.style.transition="height .4s cubic-bezier(.38,.39,.28,.95)"});
//# sourceMappingURL=maps/app.bundle.one-min.js.map
